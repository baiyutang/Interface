**简要描述：** 

- 商户针对某一笔已经成功支付的订单发起退款，操作结果在同一会话中同步返回。支持部分退款。

**参数:**

- 请求参数

| 参数名     | 变量名             | 必填 | 限制 | 类型   | 说明                                                         |
| ---------- | ------------------ | ---- | ---- | ------ | ------------------------------------------------------------ |
| 商户号     | merchant_id        | 是   | 10   | string | 由乐刷分配                                                   |
| 商户订单号 | third_order_id     | 否   | 64   | string |                                                              |
| 乐刷订单号 | leshua_order_id    | 否   | 32   | string | 商户订单号跟乐刷订单号必填1个，优先使用leshua_order_id       |
| 商户退款id | merchant_refund_id | 是   | 64   | string | 可以包含字母，确保同一商户下唯一                             |
| 退款金额   | refund_amount      | 是   | 10   | string | 退款金额，可做部分退款                                       |
| 随机字符串 | nonce_str          | 是   | 32   | string | 随机字符串，长度要求32位以内                                 |
| 通知地址   | notify_url         | 否   | 128  | string | 接收乐刷退款结果通知的URL，需做Url Encode处理，需要绝对路径，确保乐刷能正确访问 |
| 签名       | sign               | 是   | 32   | string | MD5签名结果                                                  |



- 返回参数

| 参数名           | 变量名                   | 必填 | 限制 | 类型   | 说明                                                         |
| ---------------- | ------------------------ | ---- | ---- | ------ | ------------------------------------------------------------ |
| 返回状态码       | resp_code                | 是   | 无   | string | 0 - 成功，非0 - 失败。注：此字段是通信标识,业务状态要看result_code |
| 返回错误信息     | resp_msg                 | 否   | 无   | string | 错误描述：resp_code非0时返回                                 |
| 业务结果         | result_code              | 是   | 1    | string | 0 - 成功，非0 - 失败                                         |
| 错误码           | error_code               | 否   | 无   | string | 参考错误码                                                   |
| 错误码描述       | error_msg                | 否   | 无   | string | 错误信息描述                                                 |
| 商户号           | merchant_id              | 是   | 10   | string | 由乐刷分配                                                   |
| 商户订单号       | third_order_id           | 是   | 64   | string | 商户内部订单号                                               |
| 随机字符串       | nonce_str                | 是   | 32   | string | 随机字符串                                                   |
| 签名             | sign                     | 是   | 32   | string | MD5签名结果                                                  |
| 订单状态         | status                   | 是   | 无   | string | [详见附录订单状态](#订单状态)                                |
| 商户号           | merchant_id              | 是   | 10   | string | 由乐刷分配                                                   |
| 商户订单号       | third_order_id           | 是   | 64   | string | 商户内部订单号                                               |
| 乐刷订单号       | leshua_order_id          | 是   | 32   | string | 乐刷订单号                                                   |
| 退款金额         | refund_amount            | 是   | 无   | string | 退款金额                                                     |
| 商户退款id       | merchant_refund_id       | 是   | 64   | string |                                                              |
| 乐刷退款id       | leshua_refund_id         | 是   | 32   | string |                                                              |
| 订单总金额       | total_amount             | 是   | 无   | string | 订单总金额                                                   |
| 订单余额         | order_balance            | 是   | 无   | string | 订单余额：本次退款后订单剩余金额                             |
| 实际退款金额     | settlement_refund_amount | 否   | 无   | string | 实际退款金额                                                 |
| 折扣优惠退款金额 | discount_refund_amount   | 否   | 无   | string | 折扣优惠退款金额                                             |
| 退款优惠详情     | refund_detail            | 否   | 无   | string | 退款优惠详情                                                 |


## 订单状态

| 值   | 说明     |
| :--- | :------- |
| 0    | 支付中   |
| 2    | 支付成功 |
| 6    | 订单关闭 |
| 8    | 支付失败 |
| 10   | 退款中   |
| 11   | 退款成功 |
| 12   | 退款失败 |


## 注意事项说明

-  所有涉及到金额的单位都位分，币种为RMB，最小为1分，不允许出现小数

- 文档中参数，标识为必填必须上送（如果缺少会报错），非必填的可填可不填

- 返回参数中必填为是的参数是一定会返回的，必填为否的参数则不一定返回，因升级或配置等情况实际返回参数可能不会跟文档完全一致，必须以实际接收到的参数为准
