#  概述 #
本文描述乐刷针对微信支付宝等扫码业务提供的聚合支付解决方案。仅供内部相关开发、技术支持人员与商户平台服务方技术人员使用。文档分别从交互模式、签名、接口、注意事项等方面详细介绍了乐刷的工作方式和开发过程，可以帮助开发人员快速入门并掌握开发技能，同时也可以作为日后接口参数以及参数类型的速查手册。
# 接口指南 #
##  参数格式与调用方式 ##
+ 接口传输的所有参数使用 UTF8 编码格式，包括签名。接口以 https的POST方式进行调用。
+ 图片格式为jpg,png格式。大小为每个图片不超过1M，可参考from上传文件方式

##  报文结构 ##
###  请求报文 ###
使用json报文传输业务数据， 请求报文由服务商编号、版本号、请求流程号、签名串、Json报文主体5个参数组成。说明如下：

|参数名称|类型|长度限制|是否必输|说明|
|:---|:---|:---|:---|:---|
|agentId|String|无|是|服务商编号，由乐刷分配的接入方唯一标识，明文传输。测试环境固定为10|
|version|String|无|是|目前固定值1.0|
|reqSerialNo|String|无|否|请求流水号(yyyyMMddHHmmssSSSXXXXX，其中XXXXX为5位顺序号,禁止使用UUID等无意义数据)|
|sign|String|无|是|签名串，业务数据明文参与签名后经Base64编码的字符串|
|data|String|无|是|业务数据明文字符串（Json格式，参照各个接口中输入参数说明）|
###  响应报文 ###
```
{
	"respCode":"000000",
	"respMsg":"处理成功"
	"reqSerialNo":"2017010203040500001",
	"version":"1.0",
	"data":{...}
}
```
##  签名算法 ##
>sign= Base64(md5(lepos+渠道商固定key值+data字符串值).toLowerCase())

	例: 请求报文中，data={"merchantId":"0123456789"}

	待签名串为: leposXXXXXXXXXXXXXXXXXX{"merchantId":"0123456789"}
    
    MD5后转小写: 0bc0be2e34c2d9779482327da35358cd
    
	base64: MGJjMGJlMmUzNGMyZDk3Nzk0ODIzMjdkYTM1MzU4Y2Q=


## 测试环境 ##
agentId: 10
key: 17B10781A8C5178870197906F71749D8

## 生产环境 ##

走完协议流程并且联调完提交测试报告后，我司运营同事将会提供参数给贵司



#  接口 #
以下输入参数和输出参数说明只针对data部分，其它参数参照之前的报文结构进行传输。

## 5.4 商户命名规范 ##
### 5.3.1企业类型商户简称规范 ###
1. 以公司名称命名，例：乐哈哈超市有限公司；
2. 以公司名称关键字+销售产品的组合命名，例：乐哈哈扫码支付；
3. 以公司旗下产品（公众号名称、APP名称）命 名，例：乐哈哈POS；
4. 以公司商标或商标加其他关键字命名，例：乐哈哈yeahk；
5. 以实体店店名命名，例：乐哈哈产品销售店；

### 5.3.2个体户类型商户简称规范 ###
1. 以营业执照名称命名，例：XXX销售经营店；
2. 以法人名称+销售商品命名，例：张三水果店；
3. 以实体店店名命名，例：胖嘟嘟小食店；
